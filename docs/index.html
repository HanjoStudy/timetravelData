<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Access Time Travellers data via API ‚Ä¢ timetravelData</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Access Time Travellers data via API">
<meta property="og:description" content="What the package does (one paragraph).">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">timetravelData</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/collect_all.html">Retrieving results</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/HanjoStudy/timetravelData/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="timetraveldata-">timetravelData <img src="reference/figures/logo.png" align="right" alt="" width="120"><a class="anchor" aria-label="anchor" href="#timetraveldata-"></a>
</h1></div>
<p>Welcome to the <a href="https://timetraveller.voyage/" class="external-link">Time Traveller Project!</a>.</p>
<p>Time Traveller is a digital humanities project that collects, analyses, and disseminates data about travellers‚Äô observations of pre-colonial Africa using the latest techniques in computer science.</p>
<p>Very few written primary accounts of pre-colonial Africa exist. This lack of documented history hinders our understanding of Africa‚Äôs past and long-term trajectory. We collect over 1000 years of African economic history using handwritten accounts from travellers and their maps.</p>
<p>Analysing such a corpus of text is an insurmountable task for traditional historians and would probably take a lifetimes work. By combining modern day computational linguistic techniques in combination with domain knowledge of African economic history, we build a corpus of pre-colonial African history across space and time. This large body of written accounts can be used to systemically shed new light on Africa‚Äôs past.</p>
<p>The project uses multiple open-source tools to make this data available:</p>
<p><img src="reference/figures/architecture.png" width="1857"></p>
<div class="section level2">
<h2 id="api-interface">Api Interface<a class="anchor" aria-label="anchor" href="#api-interface"></a>
</h2>
<p><a href="https://www.tidyverse.org/lifecycle/#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a> <a href="https://github.com/HanjoStudy/timetravelData/commits/develop" class="external-link"><img src="https://img.shields.io/github/last-commit/HanjoStudy/timetravelData.svg"></a></p>
<p><a href="https://github.com/HanjoStudy/timetravelData" class="external-link">timetravelData</a> provides access to over 500,000 pages of travel accounts via an API that is fed by Elasticsearch.</p>
<p>This is the homepage for the {timetravelData} R package is at <a href="https://github.com/HanjoStudy/timetravelData" class="external-link uri">https://github.com/HanjoStudy/timetravelData</a>.</p>
<p>The homepage for the {timetravelData} <code>python</code> package is <em>coming soon!</em>.</p>
<p>‚ö†Ô∏è The number of results you will be able to return will be dependent on your level of access:</p>
<ul>
<li>Example: 10 pages</li>
<li>Limited: 100 pages</li>
<li>Top: 10,000 pages</li>
</ul>
<p>We are hoping that once we have sufficient funding to expand the resource capability in order to do away with the tiered system. üòâ</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install from GitHub.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"HanjoStudy/timetravelData"</span><span class="op">)</span></span></code></pre></div>
<p>If you want availability to the latest features (at your own risk) then you can also install from the development branch.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"HanjoStudy/timetravelData"</span>, ref <span class="op">=</span> <span class="st">"dev"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">timetravelData</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span></code></pre></div>
<p>Check version.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"timetravelData"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="set-api-key">Set API Key<a class="anchor" aria-label="anchor" href="#set-api-key"></a>
</h3>
<p>To access the API you‚Äôll need to first specify an API key as provided to you by the project.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example API key (this key will only allow 10 search results).</span></span>
<span><span class="fu"><a href="reference/set_api_key.html">set_api_key</a></span><span class="op">(</span><span class="st">"test_the_package"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/get_api_key.html">get_api_key</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If you wish not to set the key every time, use <code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code> to set the key to <code>TIMETRAVELDATA_KEY</code>.</p>
<p>Please be aware, that there is an order where the API looks for keys:</p>
<ol style="list-style-type: decimal">
<li>Look for <code>ENV</code> variable, <code>TIMETRAVELDATA_KEY</code>, if not found, look in <code>cache</code> where key was stored using <code><a href="reference/set_api_key.html">set_api_key()</a></code>
</li>
<li>
<code><a href="reference/set_api_key.html">set_api_key()</a></code> OVERRIDES <code>TIMETRAVELDATA_KEY</code> in <code>.Renviron</code>!</li>
</ol>
<p>To obtain a key, please get in touch. Contact details are on the website: <a href="https://timetraveller.voyage/" class="external-link uri">https://timetraveller.voyage/</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="full-text-search">Full-text Search<a class="anchor" aria-label="anchor" href="#full-text-search"></a>
</h2>
<div class="section level3">
<h3 id="querying-the-text">Querying the text<a class="anchor" aria-label="anchor" href="#querying-the-text"></a>
</h3>
<p>The searching functionality uses a very simple interface through the <code>query_text</code> function. Lets imagine we need to look for whether the word ‚Äúcotton‚Äù is contained in the text. Start by looking up how many <em>hits</em> were seen in the database:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">total_hits</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_hits.html">query_hits</a></span><span class="op">(</span><span class="st">"cotton"</span><span class="op">)</span></span></code></pre></div>
<p>From the example, we can see that the word ‚Äúcotton‚Äù was observed on 13985 pages. Next we can start retrieving the text:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_text.html">query_text</a></span><span class="op">(</span></span>
<span>  query <span class="op">=</span><span class="st">"cotton"</span>,</span>
<span>  from_pos <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  tidy <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">out</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># A tibble: 10 √ó 6</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>   guid_hash            translate pg_nr tokens english_words hightlight</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>                <span class="er">&lt;</span>chr<span class="sc">&gt;</span>     <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>list<span class="sc">&gt;</span>    </span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a> <span class="dv">1</span> 6214a7f9b9ba3d68ba68 no          <span class="dv">680</span>    <span class="dv">468</span>           <span class="dv">163</span> <span class="sc">&lt;</span>chr [<span class="dv">19</span>]<span class="sc">&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a> <span class="dv">2</span> 704016213cd70d8cdc58 no           <span class="dv">66</span>    <span class="dv">349</span>           <span class="dv">110</span> <span class="sc">&lt;</span>chr [<span class="dv">13</span>]<span class="sc">&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a> <span class="dv">3</span> e3f7f62e9fae56dbb8cf yes          <span class="dv">41</span>    <span class="dv">301</span>           <span class="dv">103</span> <span class="sc">&lt;</span>chr [<span class="dv">9</span>]<span class="sc">&gt;</span> </span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a> <span class="dv">4</span> b364be7f05e40dc2afa4 yes         <span class="dv">138</span>    <span class="dv">342</span>           <span class="dv">135</span> <span class="sc">&lt;</span>chr [<span class="dv">15</span>]<span class="sc">&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a> <span class="dv">5</span> 06b3494a9347aad3726c no          <span class="dv">194</span>    <span class="dv">416</span>           <span class="dv">145</span> <span class="sc">&lt;</span>chr [<span class="dv">14</span>]<span class="sc">&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a> <span class="dv">6</span> 2154fc604667e60befc6 yes         <span class="dv">374</span>    <span class="dv">224</span>           <span class="dv">102</span> <span class="sc">&lt;</span>chr [<span class="dv">7</span>]<span class="sc">&gt;</span> </span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a> <span class="dv">7</span> e3f7f62e9fae56dbb8cf yes          <span class="dv">85</span>    <span class="dv">216</span>            <span class="dv">75</span> <span class="sc">&lt;</span>chr [<span class="dv">9</span>]<span class="sc">&gt;</span> </span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a> <span class="dv">8</span> e3f7f62e9fae56dbb8cf yes          <span class="dv">49</span>    <span class="dv">273</span>           <span class="dv">103</span> <span class="sc">&lt;</span>chr [<span class="dv">10</span>]<span class="sc">&gt;</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a> <span class="dv">9</span> e3f7f62e9fae56dbb8cf yes          <span class="dv">46</span>    <span class="dv">304</span>           <span class="dv">117</span> <span class="sc">&lt;</span>chr [<span class="dv">11</span>]<span class="sc">&gt;</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="dv">10</span> e3f7f62e9fae56dbb8cf yes          <span class="dv">76</span>    <span class="dv">293</span>            <span class="dv">85</span> <span class="sc">&lt;</span>chr [<span class="dv">10</span>]<span class="sc">&gt;</span></span></code></pre></div>
<p>The function has three parameters:</p>
<ul>
<li>
<strong>query:</strong> This contains the text we want to search.</li>
<li>
<strong>from_pos:</strong> This parameter is used in pagination. See the vignette how to page through results.</li>
<li>
<strong>tidy:</strong> The default is to tidy the results in a nested <code>tibble</code> where the word could have occured more than once on a page</li>
</ul>
<p>This function outputs SIX columns:</p>
<ul>
<li>
<strong>guid_hash:</strong> This is the <em>global unique identifier</em> and links back to a document (not page) within our larger corpus. See below how to look up the document meta information.</li>
<li>
<strong>translate:</strong> Was this page translated or not.</li>
<li>
<strong>pg_nr:</strong> This is the <em>page number</em> on which the search got a positive match.</li>
<li>
<strong>tokens:</strong> Number of tokens on page.</li>
<li>
<strong>english_words:</strong> Number of English Words matched. The English lookup had to have <em>more</em> (<code>&gt;</code>) than 3 characters.</li>
<li>
<strong>type:</strong> We use two types of text extraction methods: <code>libpoppler</code> from the <a href="https://github.com/ropensci/pdftools" class="external-link"><code>pdftools</code></a> package, as well as the <a href="https://github.com/ropensci/tesseract" class="external-link"><code>tesseract</code></a> library when the <code>pdftools</code> library failed. This column indicates which tool is displayed.</li>
<li>
<strong>Highlight:</strong> This is the most important column. This contains the snippets of where the text matched. To extract the text it is suggested to <code>unnest</code> the column using the <code>tidyr</code> unfunction as: <code>out %&gt;% unnest(hightlight)</code>.</li>
</ul>
</div>
<div class="section level3">
<h3 id="document-meta">Document meta<a class="anchor" aria-label="anchor" href="#document-meta"></a>
</h3>
<p>To find the document meta, we need to feed the <code>document_meta</code> function a <code>guid_hash</code></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_text.html">query_text</a></span><span class="op">(</span></span>
<span>  query <span class="op">=</span><span class="st">"cotton"</span>,</span>
<span>  from_pos <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  tidy <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">guid_hash</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">guid_hash</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="fu"><a href="reference/document_meta.html">document_meta</a></span><span class="op">(</span><span class="va">guid_hash</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="va">t</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>                    [,<span class="dv">1</span>]                                                                                                                                              </span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>guid_hash           <span class="st">"6214a7f9b9ba3d68ba68"</span>                                                                                                                            </span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>orig_file           <span class="st">"fitzgerald_ww_1891_1_english_original.pdf"</span>                                                                                                       </span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>pdftools_language   <span class="st">"english"</span>                                                                                                                                         </span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>file_size           <span class="st">"42.8 Mb"</span>                                                                                                                                         </span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>title               <span class="st">"Travels in the coastlands of British East Africa and the islands of Zanzibar and Pemba; their agricultural resources and general characteristics"</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>language            <span class="st">"english"</span>                                                                                                                                         </span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>nr_pages_text       <span class="st">"822"</span>                                                                                                                                             </span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>total_tokens        <span class="st">"263126"</span>                                                                                                                                          </span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>total_english_words <span class="st">"83824"</span>                                                                                                                                           </span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>pages               <span class="st">"822"</span>                                                                                                                                             </span></code></pre></div>
<p>This function outputs nine columns.</p>
</div>
<div class="section level3">
<h3 id="document-journey">Document Journey<a class="anchor" aria-label="anchor" href="#document-journey"></a>
</h3>
<p>To find the specific associated with a <code>guid_hash</code>, you can use <code>document_journey</code>. Some journeys have multiple <code>guid_hash</code> identifiers as multiple volumes were written.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_text.html">query_text</a></span><span class="op">(</span></span>
<span>  query <span class="op">=</span><span class="st">"cotton"</span>,</span>
<span>  from_pos <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  tidy <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">guid_hash</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">guid_hash</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="fu"><a href="reference/document_journey.html">document_journey</a></span><span class="op">(</span><span class="va">guid_hash</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="va">t</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>           [,<span class="dv">1</span>]                                                                                                                                              </span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>journey_id <span class="st">"fitzgerald_ww_1891"</span>                                                                                                                              </span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>guid_hash  <span class="st">"6214a7f9b9ba3d68ba68"</span>                                                                                                                            </span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>orig_file  <span class="st">"fitzgerald_ww_1891_1_english_original.pdf"</span>                                                                                                       </span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>year_began <span class="st">"1891"</span>                                                                                                                                            </span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>year_end   <span class="st">"1893"</span>                                                                                                                                            </span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>title      <span class="st">"Travels in the coastlands of British East Africa and the islands of Zanzibar and Pemba; their agricultural resources and general characteristics"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="document-traveller">Document Traveller<a class="anchor" aria-label="anchor" href="#document-traveller"></a>
</h3>
<p>To find the travellers associated with a journey, you need to have a <code>journey_id</code> from <code>document_journey</code></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_text.html">query_text</a></span><span class="op">(</span></span>
<span>  query <span class="op">=</span><span class="st">"cotton"</span>,</span>
<span>  from_pos <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  tidy <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">guid_hash</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">guid_hash</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">journey_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/document_journey.html">document_journey</a></span><span class="op">(</span><span class="va">guid_hash</span><span class="op">)</span><span class="op">$</span><span class="va">journey_id</span></span>
<span>  </span>
<span><span class="fu"><a href="reference/document_traveller.html">document_traveller</a></span><span class="op">(</span><span class="va">journey_id</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># A tibble: 1 √ó 11</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  journey_id         explorer_first_name explorer_surname title_profession_1</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>              <span class="er">&lt;</span>chr<span class="sc">&gt;</span>               <span class="er">&lt;</span>chr<span class="sc">&gt;</span>            <span class="er">&lt;</span>chr<span class="sc">&gt;</span>             </span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="dv">1</span> fitzgerald_ww_1891 William Walter      FitzGerald       hunter            </span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co"># ‚Ñπ 7 more variables: title_profession_1_group &lt;chr&gt;, title_profession_2 &lt;lgl&gt;,</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#   title_profession_2_group &lt;lgl&gt;, nationality &lt;chr&gt;, gender &lt;lgl&gt;,</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">#   wiki_link &lt;chr&gt;, wiki_url &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="document-countries">Document Countries<a class="anchor" aria-label="anchor" href="#document-countries"></a>
</h3>
<p>You can also look up the countries that the traveller travelled through using <code>guid_hash</code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_text.html">query_text</a></span><span class="op">(</span></span>
<span>  query <span class="op">=</span><span class="st">"cotton"</span>,</span>
<span>  from_pos <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  tidy <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">guid_hash</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">guid_hash</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  </span>
<span><span class="fu"><a href="reference/document_countries.html">document_countries</a></span><span class="op">(</span><span class="va">guid_hash</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># A tibble: 2 √ó 5</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  journey_id         guid_hash            country  country_iso region</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>              <span class="er">&lt;</span>chr<span class="sc">&gt;</span>                <span class="er">&lt;</span>chr<span class="sc">&gt;</span>    <span class="er">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="dv">1</span> fitzgerald_ww_1891 6214a7f9b9ba3d68ba68 kenya    KEN         east  </span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="dv">2</span> fitzgerald_ww_1891 6214a7f9b9ba3d68ba68 tanzania TZA         east  </span></code></pre></div>
<p>At the same time, you can lookup <code>historical</code> and <code>geographical</code> place names in Africa:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/historical_placenames.html">historical_placenames</a></span><span class="op">(</span><span class="st">"TZA"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="advance-search-queries-with-lucene-notation">Advance search queries with Lucene notation<a class="anchor" aria-label="anchor" href="#advance-search-queries-with-lucene-notation"></a>
</h3>
<div class="section level4">
<h4 id="basic-search">Basic Search<a class="anchor" aria-label="anchor" href="#basic-search"></a>
</h4>
<p>See full documentation on Elasticsearch‚Äôs <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.4/query-dsl-query-string-query.html#query-string-syntax" class="external-link">website</a></p>
<p>Basic searches uses an analyzer that independently converts each part into tokens before returning matching documents:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"(new york city) OR (big apple)"</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_text.html">query_text</a></span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span>
<span><span class="va">out</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>Warning<span class="sc">:</span> <span class="st">`</span><span class="at">cols</span><span class="st">`</span> is now required when using <span class="st">`</span><span class="at">unnest()</span><span class="st">`</span>.</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>‚Ñπ Please use <span class="st">`</span><span class="at">cols = c(hightlight)</span><span class="st">`</span>.</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="co"># A tibble: 44 √ó 6</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>   guid_hash            translate pg_nr tokens english_words hightlight         </span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>                <span class="er">&lt;</span>chr<span class="sc">&gt;</span>     <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>              </span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a> <span class="dv">1</span> 8b53b078c4a68bd218b9 no          <span class="dv">460</span>    <span class="dv">228</span>            <span class="dv">72</span> Still, <span class="sc">--</span>New<span class="sc">--</span> <span class="sc">--</span>Y‚Ä¶</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a> <span class="dv">2</span> 8b53b078c4a68bd218b9 no          <span class="dv">460</span>    <span class="dv">228</span>            <span class="dv">72</span> Neither London nor‚Ä¶</span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a> <span class="dv">3</span> 8b53b078c4a68bd218b9 no          <span class="dv">460</span>    <span class="dv">228</span>            <span class="dv">72</span> While the <span class="sc">--</span>New<span class="sc">--</span> ‚Ä¶</span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a> <span class="dv">4</span> 8b53b078c4a68bd218b9 no          <span class="dv">460</span>    <span class="dv">228</span>            <span class="dv">72</span> Some of the <span class="sc">--</span>big<span class="sc">-</span>‚Ä¶</span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a> <span class="dv">5</span> 8b53b078c4a68bd218b9 no          <span class="dv">460</span>    <span class="dv">228</span>            <span class="dv">72</span> As <span class="cf">for</span> restaurants‚Ä¶</span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a> <span class="dv">6</span> 9f12c0ed7ad30e8e63a6 no          <span class="dv">117</span>    <span class="dv">362</span>           <span class="dv">123</span> When Jack Kkago re‚Ä¶</span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a> <span class="dv">7</span> 9f12c0ed7ad30e8e63a6 no          <span class="dv">117</span>    <span class="dv">362</span>           <span class="dv">123</span> JA CK XKA G O REA ‚Ä¶</span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a> <span class="dv">8</span> 9f12c0ed7ad30e8e63a6 no          <span class="dv">117</span>    <span class="dv">362</span>           <span class="dv">123</span> These nkagos have ‚Ä¶</span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a> <span class="dv">9</span> 9f12c0ed7ad30e8e63a6 no          <span class="dv">117</span>    <span class="dv">362</span>           <span class="dv">123</span> Jack seemed to hav‚Ä¶</span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a><span class="dv">10</span> 9f12c0ed7ad30e8e63a6 no          <span class="dv">117</span>    <span class="dv">362</span>           <span class="dv">123</span> home <span class="cf">in</span> Newark, <span class="sc">--</span>‚Ä¶</span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a><span class="co"># ‚Ñπ 34 more rows</span></span></code></pre></div>
<p>A term can be a single word <em>quick</em> or <em>brown</em> - or a phrase, surrounded by double quotes - ‚Äúquick brown‚Äù</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query</span> <span class="op">&lt;-</span> <span class="st">'"new york"'</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_text.html">query_text</a></span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span>
<span><span class="va">out</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>Warning<span class="sc">:</span> <span class="st">`</span><span class="at">cols</span><span class="st">`</span> is now required when using <span class="st">`</span><span class="at">unnest()</span><span class="st">`</span>.</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>‚Ñπ Please use <span class="st">`</span><span class="at">cols = c(hightlight)</span><span class="st">`</span>.</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="co"># A tibble: 38 √ó 6</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>   guid_hash            translate pg_nr tokens english_words hightlight         </span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>                <span class="er">&lt;</span>chr<span class="sc">&gt;</span>     <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>              </span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a> <span class="dv">1</span> 7ca8d2a7f75a7d7b97c6 no          <span class="dv">340</span>    <span class="dv">189</span>            <span class="dv">14</span> Vail, <span class="sc">--</span>New<span class="sc">--</span> <span class="sc">--</span>Yo‚Ä¶</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a> <span class="dv">2</span> 7ca8d2a7f75a7d7b97c6 no          <span class="dv">340</span>    <span class="dv">189</span>            <span class="dv">14</span> <span class="sc">--</span>New<span class="sc">--</span> <span class="sc">--</span>York<span class="sc">--</span>, ‚Ä¶</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a> <span class="dv">3</span> 7ca8d2a7f75a7d7b97c6 no          <span class="dv">340</span>    <span class="dv">189</span>            <span class="dv">14</span> James, <span class="sc">--</span>New<span class="sc">--</span> <span class="sc">--</span>Y‚Ä¶</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a> <span class="dv">4</span> 7ca8d2a7f75a7d7b97c6 no          <span class="dv">340</span>    <span class="dv">189</span>            <span class="dv">14</span> Esther Herrmann, <span class="sc">-</span>‚Ä¶</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a> <span class="dv">5</span> 7ca8d2a7f75a7d7b97c6 no          <span class="dv">340</span>    <span class="dv">189</span>            <span class="dv">14</span> Gillingham, <span class="sc">--</span>New<span class="sc">-</span>‚Ä¶</span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a> <span class="dv">6</span> 7ca8d2a7f75a7d7b97c6 no          <span class="dv">340</span>    <span class="dv">189</span>            <span class="dv">14</span> Meyer, <span class="sc">--</span>New<span class="sc">--</span> <span class="sc">--</span>Y‚Ä¶</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a> <span class="dv">7</span> 04ca493b4a0ca67235e3 yes         <span class="dv">459</span>    <span class="dv">257</span>            <span class="dv">97</span> <span class="sc">--</span>NEW<span class="sc">-----</span>YORK<span class="sc">--</span> <span class="sc">-</span>‚Ä¶</span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a> <span class="dv">8</span> 04ca493b4a0ca67235e3 yes         <span class="dv">459</span>    <span class="dv">257</span>            <span class="dv">97</span> I cannot say that ‚Ä¶</span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a> <span class="dv">9</span> 04ca493b4a0ca67235e3 yes         <span class="dv">459</span>    <span class="dv">257</span>            <span class="dv">97</span> From Niagara Falls‚Ä¶</span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a><span class="dv">10</span> 04ca493b4a0ca67235e3 yes         <span class="dv">459</span>    <span class="dv">257</span>            <span class="dv">97</span> The best way to ma‚Ä¶</span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a><span class="co"># ‚Ñπ 28 more rows</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="fuzzy-search">Fuzzy Search<a class="anchor" aria-label="anchor" href="#fuzzy-search"></a>
</h4>
<p>You can run fuzzy queries using the <code>~</code> operator (We have it set to lvl. 1).</p>
<blockquote>
<p>The query uses the Damerau-Levenshtein distance to find all terms with a maximum of two changes, where a change is the insertion, deletion or substitution of a single character, or transposition of two adjacent characters.</p>
</blockquote>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"Aligtor~"</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_text.html">query_text</a></span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span>
<span><span class="va">out</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>Warning<span class="sc">:</span> <span class="st">`</span><span class="at">cols</span><span class="st">`</span> is now required when using <span class="st">`</span><span class="at">unnest()</span><span class="st">`</span>.</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>‚Ñπ Please use <span class="st">`</span><span class="at">cols = c(hightlight)</span><span class="st">`</span>.</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co"># A tibble: 13 √ó 6</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>   guid_hash            translate pg_nr tokens english_words hightlight         </span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>                <span class="er">&lt;</span>chr<span class="sc">&gt;</span>     <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>              </span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a> <span class="dv">1</span> d5e102415ffcc7ee0fdf no           <span class="dv">57</span>    <span class="dv">312</span>            <span class="dv">99</span> <span class="dv">49</span> Sohooner <span class="sc">--</span>Alig‚Ä¶</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a> <span class="dv">2</span> d5e102415ffcc7ee0fdf no           <span class="dv">57</span>    <span class="dv">312</span>            <span class="dv">99</span> Stockton, of the <span class="sc">-</span>‚Ä¶</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a> <span class="dv">3</span> d5e102415ffcc7ee0fdf no           <span class="dv">57</span>    <span class="dv">312</span>            <span class="dv">99</span> Tuesday Morning, 1‚Ä¶</span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a> <span class="dv">4</span> d5e102415ffcc7ee0fdf no           <span class="dv">16</span>    <span class="dv">320</span>           <span class="dv">109</span> The period of the ‚Ä¶</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a> <span class="dv">5</span> d5e102415ffcc7ee0fdf no           <span class="dv">16</span>    <span class="dv">320</span>           <span class="dv">109</span> We had been taught‚Ä¶</span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a> <span class="dv">6</span> b307fd07898c2d10004e no          <span class="dv">250</span>    <span class="dv">130</span>            <span class="dv">14</span> <span class="sc">--</span>Alitor<span class="sc">--</span> <span class="fl">4.</span> Eh n‚Ä¶</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a> <span class="dv">7</span> 99810a792d27f0351a94 no          <span class="dv">371</span>    <span class="dv">176</span>             <span class="dv">1</span> Ferocidad del <span class="sc">--</span>Al‚Ä¶</span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a> <span class="dv">8</span> 1209eb31d927d3492fad no          <span class="dv">287</span>    <span class="dv">192</span>             <span class="dv">5</span> . ¬© <span class="dv">17</span> <span class="dv">40</span> <span class="dv">40</span> <span class="dv">70</span> 43‚Ä¶</span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a> <span class="dv">9</span> 99810a792d27f0351a94 no           <span class="dv">73</span>    <span class="dv">269</span>             <span class="dv">6</span> embriagado , se ar‚Ä¶</span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a><span class="dv">10</span> 99810a792d27f0351a94 no           <span class="dv">74</span>    <span class="dv">256</span>             <span class="dv">8</span> <span class="dv">66</span> EL VIAGERO UNIV‚Ä¶</span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a><span class="dv">11</span> c2bcb775ef32fdfa7776 no          <span class="dv">248</span>    <span class="dv">329</span>            <span class="dv">94</span> It runs very awkwa‚Ä¶</span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a><span class="dv">12</span> d5e102415ffcc7ee0fdf no           <span class="dv">17</span>    <span class="dv">340</span>           <span class="dv">125</span> our contract <span class="cf">for</span> t‚Ä¶</span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a><span class="dv">13</span> e7f8f3d24650e830b7f6 no          <span class="dv">329</span>    <span class="dv">332</span>            <span class="dv">17</span> <span class="sc">--</span>Aligator<span class="sc">--</span> Juda ‚Ä¶</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="proximity-search">Proximity Search<a class="anchor" aria-label="anchor" href="#proximity-search"></a>
</h4>
<p>We can also apply proximity searches:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query</span> <span class="op">&lt;-</span> <span class="st">'"crocodile shoot"~5'</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_text.html">query_text</a></span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span>
<span><span class="va">out</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>Warning<span class="sc">:</span> <span class="st">`</span><span class="at">cols</span><span class="st">`</span> is now required when using <span class="st">`</span><span class="at">unnest()</span><span class="st">`</span>.</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>‚Ñπ Please use <span class="st">`</span><span class="at">cols = c(hightlight)</span><span class="st">`</span>.</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="co"># A tibble: 14 √ó 6</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>   guid_hash            translate pg_nr tokens english_words hightlight         </span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>                <span class="er">&lt;</span>chr<span class="sc">&gt;</span>     <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>              </span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a> <span class="dv">1</span> 8f883596e0ef7831bd51 no          <span class="dv">174</span>    <span class="dv">277</span>            <span class="dv">93</span> In these some nati‚Ä¶</span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a> <span class="dv">2</span> 8f883596e0ef7831bd51 no          <span class="dv">174</span>    <span class="dv">277</span>            <span class="dv">93</span> appears, Avlien th‚Ä¶</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a> <span class="dv">3</span> 8f883596e0ef7831bd51 no          <span class="dv">174</span>    <span class="dv">277</span>            <span class="dv">93</span> hide themselves fr‚Ä¶</span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a> <span class="dv">4</span> a84cdc9a0e701b6360fe no          <span class="dv">135</span>    <span class="dv">196</span>            <span class="dv">69</span> I took a rifle fro‚Ä¶</span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a> <span class="dv">5</span> aa4800b0602890f781f6 no           <span class="dv">19</span>    <span class="dv">192</span>            <span class="dv">65</span> a <span class="sc">--</span>Crocodile<span class="sc">--</span> Th‚Ä¶</span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a> <span class="dv">6</span> aa4800b0602890f781f6 no           <span class="dv">19</span>    <span class="dv">192</span>            <span class="dv">65</span> Turtle Soup Gazell‚Ä¶</span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a> <span class="dv">7</span> 5d764eb59b5587e5e03b no          <span class="dv">272</span>    <span class="dv">224</span>            <span class="dv">77</span> Hunting again √¢‚Ç¨‚ÄùT‚Ä¶</span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a> <span class="dv">8</span> 0ba1ee2ca1d36e383b8b no          <span class="dv">292</span>    <span class="dv">237</span>           <span class="dv">101</span> It is useless to a‚Ä¶</span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a> <span class="dv">9</span> f3879792041cf8bbbadb no           <span class="dv">19</span>    <span class="dv">227</span>            <span class="dv">64</span> a <span class="sc">--</span>Crocodile<span class="sc">--</span> √¢‚Ç¨‚Ä¶</span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a><span class="dv">10</span> f3879792041cf8bbbadb no           <span class="dv">19</span>    <span class="dv">227</span>            <span class="dv">64</span> Gazelle<span class="sc">-</span>shooting√¢‚Ç¨‚Ä¶</span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a><span class="dv">11</span> aa4800b0602890f781f6 no           <span class="dv">87</span>    <span class="dv">287</span>           <span class="dv">107</span> <span class="sc">--</span>SHOOT<span class="sc">--</span> A <span class="sc">--</span>CROC‚Ä¶</span>
<span id="cb25-18"><a href="#cb25-18" tabindex="-1"></a><span class="dv">12</span> b3f7b94ac2bda5f1693d no          <span class="dv">103</span>    <span class="dv">297</span>           <span class="dv">109</span> Every traveller up‚Ä¶</span>
<span id="cb25-19"><a href="#cb25-19" tabindex="-1"></a><span class="dv">13</span> 5b98c09a6ba6c3f39e80 no           <span class="dv">72</span>    <span class="dv">285</span>            <span class="dv">92</span> In the morning, th‚Ä¶</span>
<span id="cb25-20"><a href="#cb25-20" tabindex="-1"></a><span class="dv">14</span> aa4800b0602890f781f6 no          <span class="dv">133</span>    <span class="dv">277</span>           <span class="dv">109</span> <span class="sc">--</span>SHOOT<span class="sc">--</span> A MONSTE‚Ä¶</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="boosting-search">Boosting Search<a class="anchor" aria-label="anchor" href="#boosting-search"></a>
</h4>
<p>Use the boost operator <code>^</code> to make one term more relevant than another:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query</span> <span class="op">&lt;-</span> <span class="st">'"crocodile^ shoot"~5'</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_text.html">query_text</a></span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span>
<span><span class="va">out</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>Warning<span class="sc">:</span> <span class="st">`</span><span class="at">cols</span><span class="st">`</span> is now required when using <span class="st">`</span><span class="at">unnest()</span><span class="st">`</span>.</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>‚Ñπ Please use <span class="st">`</span><span class="at">cols = c(hightlight)</span><span class="st">`</span>.</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="co"># A tibble: 14 √ó 6</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>   guid_hash            translate pg_nr tokens english_words hightlight         </span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>                <span class="er">&lt;</span>chr<span class="sc">&gt;</span>     <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>              </span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a> <span class="dv">1</span> 8f883596e0ef7831bd51 no          <span class="dv">174</span>    <span class="dv">277</span>            <span class="dv">93</span> In these some nati‚Ä¶</span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a> <span class="dv">2</span> 8f883596e0ef7831bd51 no          <span class="dv">174</span>    <span class="dv">277</span>            <span class="dv">93</span> appears, Avlien th‚Ä¶</span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a> <span class="dv">3</span> 8f883596e0ef7831bd51 no          <span class="dv">174</span>    <span class="dv">277</span>            <span class="dv">93</span> hide themselves fr‚Ä¶</span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a> <span class="dv">4</span> a84cdc9a0e701b6360fe no          <span class="dv">135</span>    <span class="dv">196</span>            <span class="dv">69</span> I took a rifle fro‚Ä¶</span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a> <span class="dv">5</span> aa4800b0602890f781f6 no           <span class="dv">19</span>    <span class="dv">192</span>            <span class="dv">65</span> a <span class="sc">--</span>Crocodile<span class="sc">--</span> Th‚Ä¶</span>
<span id="cb27-12"><a href="#cb27-12" tabindex="-1"></a> <span class="dv">6</span> aa4800b0602890f781f6 no           <span class="dv">19</span>    <span class="dv">192</span>            <span class="dv">65</span> Turtle Soup Gazell‚Ä¶</span>
<span id="cb27-13"><a href="#cb27-13" tabindex="-1"></a> <span class="dv">7</span> 5d764eb59b5587e5e03b no          <span class="dv">272</span>    <span class="dv">224</span>            <span class="dv">77</span> Hunting again √¢‚Ç¨‚ÄùT‚Ä¶</span>
<span id="cb27-14"><a href="#cb27-14" tabindex="-1"></a> <span class="dv">8</span> 0ba1ee2ca1d36e383b8b no          <span class="dv">292</span>    <span class="dv">237</span>           <span class="dv">101</span> It is useless to a‚Ä¶</span>
<span id="cb27-15"><a href="#cb27-15" tabindex="-1"></a> <span class="dv">9</span> f3879792041cf8bbbadb no           <span class="dv">19</span>    <span class="dv">227</span>            <span class="dv">64</span> a <span class="sc">--</span>Crocodile<span class="sc">--</span> √¢‚Ç¨‚Ä¶</span>
<span id="cb27-16"><a href="#cb27-16" tabindex="-1"></a><span class="dv">10</span> f3879792041cf8bbbadb no           <span class="dv">19</span>    <span class="dv">227</span>            <span class="dv">64</span> Gazelle<span class="sc">-</span>shooting√¢‚Ç¨‚Ä¶</span>
<span id="cb27-17"><a href="#cb27-17" tabindex="-1"></a><span class="dv">11</span> aa4800b0602890f781f6 no           <span class="dv">87</span>    <span class="dv">287</span>           <span class="dv">107</span> <span class="sc">--</span>SHOOT<span class="sc">--</span> A <span class="sc">--</span>CROC‚Ä¶</span>
<span id="cb27-18"><a href="#cb27-18" tabindex="-1"></a><span class="dv">12</span> b3f7b94ac2bda5f1693d no          <span class="dv">103</span>    <span class="dv">297</span>           <span class="dv">109</span> Every traveller up‚Ä¶</span>
<span id="cb27-19"><a href="#cb27-19" tabindex="-1"></a><span class="dv">13</span> 5b98c09a6ba6c3f39e80 no           <span class="dv">72</span>    <span class="dv">285</span>            <span class="dv">92</span> In the morning, th‚Ä¶</span>
<span id="cb27-20"><a href="#cb27-20" tabindex="-1"></a><span class="dv">14</span> aa4800b0602890f781f6 no          <span class="dv">133</span>    <span class="dv">277</span>           <span class="dv">109</span> <span class="sc">--</span>SHOOT<span class="sc">--</span> A MONSTE‚Ä¶</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="boolean">Boolean<a class="anchor" aria-label="anchor" href="#boolean"></a>
</h4>
<blockquote>
<p>By default, all terms are optional, as long as one term matches. A search for <code>foo bar baz</code> will find any document that contains one or more of <code>foo</code> or <code>bar</code> or <code>baz</code>. We have already discussed the default_operator above which allows you to force all terms to be required, but there are also boolean operators which can be used in the query string itself to provide more control.</p>
</blockquote>
<p>The preferred operators are <code>+</code> (this term must be present) and <code>-</code> (this term must not be present). All other terms are optional. For example, this query:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"crocodile shoot +hunting -shoes"</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_text.html">query_text</a></span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span>
<span><span class="va">out</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>Warning<span class="sc">:</span> <span class="st">`</span><span class="at">cols</span><span class="st">`</span> is now required when using <span class="st">`</span><span class="at">unnest()</span><span class="st">`</span>.</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>‚Ñπ Please use <span class="st">`</span><span class="at">cols = c(hightlight)</span><span class="st">`</span>.</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="co"># A tibble: 36 √ó 6</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>   guid_hash            translate pg_nr tokens english_words hightlight         </span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>                <span class="er">&lt;</span>chr<span class="sc">&gt;</span>     <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>              </span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a> <span class="dv">1</span> a84cdc9a0e701b6360fe no          <span class="dv">135</span>    <span class="dv">196</span>            <span class="dv">69</span> I took a rifle fro‚Ä¶</span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a> <span class="dv">2</span> a84cdc9a0e701b6360fe no          <span class="dv">135</span>    <span class="dv">196</span>            <span class="dv">69</span> I had completely r‚Ä¶</span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a> <span class="dv">3</span> a84cdc9a0e701b6360fe no          <span class="dv">135</span>    <span class="dv">196</span>            <span class="dv">69</span> of a <span class="sc">--</span>crocodile<span class="sc">--</span>‚Ä¶</span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a> <span class="dv">4</span> a84cdc9a0e701b6360fe no          <span class="dv">135</span>    <span class="dv">196</span>            <span class="dv">69</span> A <span class="sc">--</span>CROCODILE<span class="sc">--</span> GI‚Ä¶</span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a> <span class="dv">5</span> 5d764eb59b5587e5e03b no           <span class="dv">20</span>    <span class="dv">208</span>            <span class="dv">69</span> <span class="sc">--</span>Hunting<span class="sc">--</span> again ‚Ä¶</span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a> <span class="dv">6</span> 5d764eb59b5587e5e03b no           <span class="dv">20</span>    <span class="dv">208</span>            <span class="dv">69</span> the Setsiebucks √¢‚Ç¨‚Ä¶</span>
<span id="cb29-13"><a href="#cb29-13" tabindex="-1"></a> <span class="dv">7</span> 5d764eb59b5587e5e03b no           <span class="dv">20</span>    <span class="dv">208</span>            <span class="dv">69</span> Lobengula treated ‚Ä¶</span>
<span id="cb29-14"><a href="#cb29-14" tabindex="-1"></a> <span class="dv">8</span> 84a5cc12d1f1d89562c8 yes         <span class="dv">460</span>    <span class="dv">327</span>           <span class="dv">111</span> Lo Bengula was cau‚Ä¶</span>
<span id="cb29-15"><a href="#cb29-15" tabindex="-1"></a> <span class="dv">9</span> 84a5cc12d1f1d89562c8 yes         <span class="dv">460</span>    <span class="dv">327</span>           <span class="dv">111</span> Lo Bengula burst i‚Ä¶</span>
<span id="cb29-16"><a href="#cb29-16" tabindex="-1"></a><span class="dv">10</span> 84a5cc12d1f1d89562c8 yes         <span class="dv">460</span>    <span class="dv">327</span>           <span class="dv">111</span> It should be known‚Ä¶</span>
<span id="cb29-17"><a href="#cb29-17" tabindex="-1"></a><span class="co"># ‚Ñπ 26 more rows</span></span></code></pre></div>
<p>states that:</p>
<ul>
<li>
<code>hunting</code> must be present.</li>
<li>
<code>shoes</code> must not be present.</li>
<li>
<code>crocodile</code> and <code>shoot</code> are optional - their presence increases the relevance.</li>
</ul>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing timetravelData</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Hanjo Odendaal <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1172-0444" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Alexander Moradi <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-4165-4006" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Edward Kerby <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2156-4449" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Hanjo Odendaal, Alexander Moradi, Edward Kerby.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
